# "Route not found" في لوحة الأدمن

## السبب

رسالة **"Route not found"** تصدر من **الباك اند** (الـ API) وليست من تطبيق الأدمن نفسه.  
معناها: الطلب وصل لسيرفر الـ API، لكن المسار (URL) غير معرف عنده، فيُرجع 404.

## متى تحصل؟

- **أنت:** تشغّل الأدمن والباك اند على نفس الجهاز → الطلبات تروح لـ `localhost:4000` → كل شيء يشتغل.
- **صاحبك:** يفتح لوحة الأدمن من جهازه أو من رابط أنت ناشرها.

في المتصفح، عنوان الـ API الافتراضي هو `http://localhost:4000/api`.  
أي طلب من متصفح **صاحبك** يروح لـ **جهاز صاحبك** على البورت 4000:

- إذا ما عنده باك اند شغال على جهازه → غالباً **Connection refused** أو **Failed to fetch**.
- إذا عنده خدمة ثانية على 4000 (مثلاً بروكسي أو سيرفر قديم) وقد ترجع 404 → يظهر له **"Route not found"**.

في الحالتين، المشكلة أن **الأدمن يكلّم عنوان API غلط** بالنسبة لصاحبك.

## الحل

يجب أن **كل من يفتح لوحة الأدمن** يكلّم **نفس الباك اند** اللي يستخدمه أنت.

### 1) تشغيل الأدمن لصاحبك مع عنوان الـ API الصحيح

إذا الباك اند شغال على **جهازك**، اعرف IP جهازك (مثلاً `192.168.1.10`) وامنح صاحبك الرابط + أوامر التشغيل:

```bash
cd admin_web
flutter run -d chrome --dart-define=API_BASE_URL=http://192.168.1.10:4000/api
```

- غيّر `192.168.1.10` إلى IP جهازك الفعلي.
- تأكد أن الباك اند يسمع على `0.0.0.0` (أو كل الواجهات) وليس `127.0.0.1` فقط.

### 2) بناء ويب للأدمن وتشغيله من سيرفر

لو تبني ويب وتخزّنه على سيرفر ويب:

```bash
flutter build web --dart-define=API_BASE_URL=https://your-api-domain.com/api
```

- استبدل `https://your-api-domain.com/api` بعنوان الباك اند الحقيقي (على سيرفرك أو استضافتك).

بهذا الشكل، أي واحد يفتح رابط لوحة الأدمن يكلّم **نفس الـ API** اللي حددته هنا، وما راح يظهر له "Route not found" بسبب عنوان API غلط.

### 3) التأكد من الباك اند

- الباك اند شغال (مثلاً `node server.js` أو `npm run dev`).
- البورت 4000 (أو اللي تستخدمه) مفتوح.
- لو الأدمن على جهاز ثاني أو على النت، الـ API يجب يكون متاح من **خارج الجهاز** ( firewall / port forwarding إن لزم).

## ملخص

| الحالة | السبب | الحل |
|--------|--------|------|
| عندك يشتغل، عند صاحبك "Route not found" | الأدمن يكلّم `localhost` أو عنوان API غلط من جهة صاحبك | استخدم `--dart-define=API_BASE_URL=...`指向 نفس الباك اند |
| الطلبات ما توصل أصلاً | الباك اند مش شغال أو مش متاح من شبكة صاحبك | شغّل الباك اند وتأكد من الـ IP والبوابت والـ firewall |

**تلخيص:** "Route not found" = الطلب واصل لسيرفر، لكن المسار مش موجود عنده. غالباً السبب عنوان API خاطئ أو سيرفر مختلف. حِلّه: جعل الـ API واحد وموحّد لكل من يستخدم الأدمن عبر `API_BASE_URL`.
